version: 2

models:
  - name: fct_sales_item
    description: "Item-level sales fact, USD & local revenue with traffic and geography."
    columns:
      - name: session_date
        tests: [not_null]
      - name: transaction_id
        tests: [not_null]
      - name: product_sku
        tests: [not_null]
      - name: revenue_usd
        tests:
          - not_null
          - dbt_utils.expression_is_true:
              expression: "revenue_usd >= 0"
      - name: revenue_local
        tests:
          - dbt_utils.expression_is_true:
              expression: "revenue_local >= 0"

  - name: dim_products
    columns:
      - name: product_sku
        tests: [unique, not_null]

  - name: dim_country
    columns:
      - name: country
        tests: [unique, not_null]

  - name: dim_visitors
    columns:
      - name: visitor_id
        tests: [unique, not_null]

  - name: dim_date
    columns:
      - name: date
        tests: [unique, not_null]
